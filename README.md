# 10.3 «Pacemaker»
# Александр Широбоков
## Задание 1. Опишите основные функции и назначение Pacemaker.
Pacemaker - это программное обеспечение, которое используется в кластерных системах для обеспечения высокой доступности и отказоустойчивости. Оно работает на каждом узле кластера и контролирует работу приложений и сервисов на этих узлах.

Основные функции Pacemaker включают:
 - Контроль доступности узлов кластера: Pacemaker следит за работоспособностью каждого узла кластера и определяет, доступен ли узел для работы приложений и сервисов. Если узел недоступен, Pacemaker перенаправляет задачи на другой узел.
 - Мониторинг работоспособности сервисов: Pacemaker контролирует работу приложений и сервисов на каждом узле кластера и перенаправляет задачи на другой узел, если сервисы на текущем узле не работают правильно.
 - Распределение задач между узлами: Pacemaker определяет, какие задачи могут быть выполнены на каждом узле кластера, и распределяет их между узлами таким образом, чтобы обеспечить равномерную загрузку.
 - Обеспечение отказоустойчивости: Pacemaker обеспечивает непрерывную работу приложений и сервисов в случае отказа узла кластера. Он автоматически перенаправляет задачи на другие доступные узлы, чтобы обеспечить продолжение работы.
 - Обновление и управление кластером: Pacemaker позволяет управлять кластером, добавлять и удалять узлы, обновлять и настраивать приложения и сервисы.
 - Мониторинг производительности и состояния кластера: Pacemaker предоставляет информацию о состоянии и производительности кластера, такую как загрузка узлов, потребление ресурсов, производительность приложений и сервисов.
 - Функции, описанные в лекции:   
● Обнаружение и восстановление сбоев на уровне узлов и
сервисов;   
● Независимость от подсистемы хранения: общий диск не
требуется;    
● Независимость от типов ресурсов: все, что может быть
заскриптовано, может быть кластеризовано;   
● Поддержка STONITH (Shoot-The-Other-Node-In-The-Head);
Поддержка кластеров любого размера;   
● Поддержка и кворумных и ресурсозависимых кластеров;   
● Поддержка практически любой избыточной конфигурации;    
● Автоматическая репликация конфига на все узлы кластера;   
● Возможность задания порядка запуска ресурсов, а также их
совместимости на одном узле;    
● Поддержка расширенных типов ресурсов: клонов (запущен
на множестве узлов) и с дополнительными состояниями
(master/slave и т.п.);    
● Единый кластерный шелл (crm), унифицированный,
скриптующийся.    

Назначение Pacemaker заключается в обеспечении высокой доступности и отказоустойчивости кластерных приложений и сервисов. Он позволяет обнаруживать и быстро реагировать на отказы узлов и сервисов, перенаправлять задачи на другие доступные узлы и обеспечивать непрерывную работу кластера. Pacemaker является важным компонентом для построения кластерных систем, которые используются в различных областях, таких как финансы, телекоммуникации, здравоохранение, государственное управление и другие отрасли, где непрерывная работа приложений и сервисов является критически важной.

Pacemaker поддерживает широкий спектр технологий кластеризации, включая синхронную и асинхронную репликацию данных, общую файловую систему и другие методы. Это позволяет использовать Pacemaker для различных типов приложений, таких как базы данных, веб-серверы, электронная почта, DNS-серверы и другие.

Важно отметить, что Pacemaker не является единственным решением для построения кластеров и существуют другие программы, такие как Corosync, Keepalived и Heartbeat, которые также могут использоваться для этой цели. Однако, Pacemaker считается одним из наиболее распространенных и мощных решений для построения кластеров в современных IT-системах.
## Задание 2. Опишите основные функции и назначение Corosync.
Corosync - это программное обеспечение для обеспечения высокой доступности и отказоустойчивости в кластерных системах. Оно используется для синхронизации состояния между узлами кластера и координации выполнения задач на этих узлах.

Основные функции Corosync включают:
 - Координация выполнения задач: Corosync синхронизирует состояние между узлами кластера и определяет, какие задачи должны выполняться на каждом узле. Это обеспечивает эффективное распределение задач и уменьшает конфликты между узлами.
 - Обеспечение высокой доступности: Corosync следит за доступностью узлов кластера и перенаправляет задачи на другие доступные узлы в случае отказа одного или нескольких узлов. Это обеспечивает непрерывную работу приложений и сервисов.
 - Мониторинг состояния узлов: Corosync контролирует состояние узлов кластера и определяет, доступен ли узел для выполнения задач. Если узел недоступен, Corosync перенаправляет задачи на другой узел.
 - Синхронизация данных: Corosync обеспечивает синхронизацию данных между узлами кластера. Это позволяет использовать общую файловую систему и другие решения для совместного доступа к данным.
 - Обеспечение отказоустойчивости: Corosync обеспечивает непрерывную работу приложений и сервисов в случае отказа узлов кластера. Он автоматически перенаправляет задачи на другие доступные узлы, чтобы обеспечить продолжение работы.
 - Мониторинг производительности и состояния кластера: Corosync предоставляет информацию о состоянии и производительности кластера, такую как загрузка узлов, потребление ресурсов, производительность приложений и сервисов.
 - Функции, описанные в лекции:  
● отслеживание состояния приложений;    
● оповещение приложений о смене активной ноды кластера;   
● отправка одинаковых сообщений процессам на всех узлах
кластера;   
● предоставление доступа к базе данных с конфигурацией и
статистикой, а также отправка уведомлений о ее изменениях.    


Назначение Corosync заключается в обеспечении высокой доступности и отказоустойчивости кластерных приложений и сервисов. Он позволяет обнаруживать и быстро реагировать на отказы узлов, перенаправлять задачи на другие доступные узлы и обеспечивать непрерывную работу кластера. Corosync является важной составляющей многих кластерных систем, включая OpenStack, Pacemaker и другие. Он используется в различных областях, таких как облачные вычисления, телекоммуникации, финансовые услуги, научные исследования и т.д.

Кроме того, Corosync обеспечивает гибкую настройку и конфигурацию для различных потребностей и сценариев использования. Он поддерживает различные протоколы синхронизации, такие как UDP и TCP, а также может использовать различные механизмы передачи сообщений, такие как Multicast и Unicast.

В целом, основные функции и назначение Corosync заключаются в обеспечении надежной и отказоустойчивой работы кластерных приложений и сервисов. Он предоставляет средства для координации и синхронизации между узлами кластера, мониторинга состояния узлов и обеспечения высокой доступности и отказоустойчивости. Благодаря своей гибкости и настраиваемости, Corosync может быть использован в различных сценариях и областях применения.
## Задание 3. Соберите модель, состоящую из двух виртуальных машин. Установите Pacemaker, Corosync, Pcs. Настройте HA кластер.
![Снимок экрана (71)](https://user-images.githubusercontent.com/69298696/229667003-fa511b1b-7d1a-4fc9-950a-e7f211a9c90c.png)
![Снимок экрана (72)](https://user-images.githubusercontent.com/69298696/229667015-157adcb8-3031-4b0c-89d9-5ae58b25b5ae.png)
![Снимок экрана (73)](https://user-images.githubusercontent.com/69298696/229667018-66d87972-d9d9-4698-8eae-87d1b05e1cd3.png)
![Снимок экрана (74)](https://user-images.githubusercontent.com/69298696/229667021-5463ce83-5b2c-4c38-9d4f-4c1632cdb403.png)
![Снимок экрана (75)](https://user-images.githubusercontent.com/69298696/229667022-0d2b3169-80a6-4efc-8a20-7ab4a9226f6f.png)
![Снимок экрана (76)](https://user-images.githubusercontent.com/69298696/229667024-49648dee-420c-4c39-8219-cb2bfeec3b0a.png)

## Задание 4. Установите и настройте DRBD-сервис для настроенного кластера.
